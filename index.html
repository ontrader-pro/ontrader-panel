<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Test CoinGecko</title>
  <style>
    body { background:#101729; color:#fff; font-family:sans-serif; padding:20px; }
    table { width:100%; border-collapse:collapse; margin-top:1em; }
    th,td { border:1px solid #333; padding:8px; text-align:center; }
    thead { background:#1f2a44; color:#25f0ff; }
  </style>
</head>
<body>
  <h1>Test de Precios CoinGecko</h1>
  <div id="panel">Cargando…</div>

  <script>
    // 1) Lista corta de ejemplo
    const cgIDs = ["bitcoin","ethereum","binancecoin","solana","ripple"];
    const mapSym = { bitcoin:"BTC", ethereum:"ETH", binancecoin:"BNB", solana:"SOL", ripple:"XRP" };

    async function loadPrices(){
      document.getElementById("panel").innerText = "Cargando datos…";
      try {
        const res = await fetch(
          `https://api.coingecko.com/api/v3/simple/price?ids=${cgIDs.join(",")}&vs_currencies=usd`
        );
        const d = await res.json();
        let html = `<table>
          <thead><tr><th>Cripto</th><th>Precio (USD)</th></tr></thead><tbody>`;
        cgIDs.forEach(id => {
          html += `<tr><td>${mapSym[id]}</td><td>$${d[id].usd.toLocaleString()}</td></tr>`;
        });
        html += "</tbody></table>";
        document.getElementById("panel").innerHTML = html;
      } catch(e) {
        document.getElementById("panel").innerText = "Error cargando datos.";
        console.error(e);
      }
    }

    loadPrices();
    setInterval(loadPrices, 30000);
  </script>
</body>
</html>
